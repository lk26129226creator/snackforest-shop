<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="SnackForest 線上零食商店 - 精選零食、快速結帳">
    <title>SnackForest 客戶端</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/frontend/style.css">
</head>
<body>

<a class="visually-hidden-focusable" href="#main-content">跳到主要內容</a>

<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
    <a class="navbar-brand" href="index.html" aria-label="回到首頁" title="回到 SnackForest 首頁">SnackForest</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="index.html">商品列表</a>
                </li>
                
            </ul>
            <div class="d-flex align-items-center">
                <a class="btn btn-outline-light me-2 position-relative" href="cart.html" aria-label="購物車">
                    購物車
                    <span id="cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
                </a>
                <button class="btn btn-outline-light" onclick="logout()">登出</button>
            </div>
        </div>
    </div>
</nav>

<main class="container mt-4" id="main-content">
    <div class="row mb-3">
        <div class="col-md-3">
            <select id="categoryFilter" class="form-select">
                <option value="all">所有類別</option>
            </select>
        </div>
        <div class="col-md-9">
            <input type="text" id="searchInput" class="form-control" placeholder="搜尋商品...">
        </div>
    </div>
    <div id="product-list" class="product-grid"></div>
    <div id="pagination" class="d-flex justify-content-center mt-4"></div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="main.js"></script>
<script src="client.js"></script>

<div id="liveToast" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">通知</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body"></div>
    </div>
</div>

<!-- Product Detail Hover Popover -->
<div id="product-hover-popover" class="card shadow-lg p-3 bg-white rounded" style="display: none; z-index: 2000;">
    <button id="popover-close-btn" type="button" class="btn-close" aria-label="關閉"></button>
    <div class="popover-inner d-flex">
        <div class="left" style="position:relative;">
            <img id="popover-product-image" src="" alt="Product Image">
            <div class="thumbs-row d-flex align-items-center mt-3">
                <button id="popover-thumb-prev" class="btn btn-outline-secondary me-2" aria-label="上一張">◀</button>
                <div id="popover-thumbs" class="d-flex gap-2 flex-grow-1" aria-label="其他圖片"></div>
                <button id="popover-thumb-next" class="btn btn-outline-secondary ms-2" aria-label="下一張">▶</button>
            </div>
        </div>
        <div class="right ms-3" style="max-height:calc(100vh - 160px); overflow:auto;">
            <h5 class="card-title" id="popover-product-name"></h5>
            <p class="card-text text-success fw-bold" id="popover-product-price"></p>
            <p class="card-text" id="popover-product-category"></p>
            <div id="popover-metadata" class="mt-2 mb-2">
                <div class="mb-1"><small id="popover-origin">產地：<span></span></small></div>
                <div class="mb-1"><small id="popover-production-date">生產：<span></span></small></div>
                <div class="mb-1"><small id="popover-expiry-date">有效至：<span></span></small></div>
            </div>
            <div class="mt-3">
                <label class="me-2">數量:</label>
        <div class="input-group" style="width:160px; display:inline-flex; vertical-align:middle;">
            <button class="btn btn-outline-secondary" id="popover-dec-qty">-</button>
            <input type="text" id="popover-qty" class="form-control text-center" value="1" readonly style="width:72px;">
            <button class="btn btn-outline-secondary" id="popover-inc-qty">+</button>
        </div>
            </div>
            <div class="mt-3 d-flex gap-2">
                <button id="popover-add-to-cart" class="btn btn-success btn-sm">加入購物車</button>
                <a href="#" id="popover-view-details-btn" class="btn btn-sm btn-primary">查看詳情</a>
            </div>
            <div class="mt-3">
                <h6 class="h6 mb-2">商品介紹</h6>
                <div id="popover-introduction" class="product-intro text-secondary" style="white-space: pre-wrap;"></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>